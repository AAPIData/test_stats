<<<<<<< Updated upstream
direction = "auto"))
aa_statepop %>%
st_transform(crs = "+init=epsg:4326") %>%
leaflet(width = "100%") %>%
addProviderTiles(provider = "CartoDB.Positron") %>%
addPolygons(popup = ~ str_extract(NAME, "^([^,]*)"),
stroke = FALSE,
smoothFactor = 0,
fillOpacity = 0.7,
color = ~ pal(estimate)) %>%
addLegend("bottomright",
pal = pal,
values = ~ estimate,
title = "Median Home Value",
labFormat = labelFormat(prefix = "$"),
opacity = 1)
pal <- colorNumeric(palette = "viridis",
domain = aa_statepop$estimate)
aa_statepop %>%
st_transform(crs = "+init=epsg:4326") %>%
leaflet(width = "100%") %>%
addProviderTiles(provider = "CartoDB.Positron") %>%
addPolygons(popup = ~ str_extract(NAME, "^([^,]*)"),
stroke = FALSE,
smoothFactor = 0,
fillOpacity = 0.7,
color = ~ pal(estimate)) %>%
addLegend("bottomright",
pal = pal,
values = ~ estimate,
title = "Median Home Value",
labFormat = labelFormat(prefix = "$"),
opacity = 1)
aa_statepop %>%
st_transform(crs = "+init=epsg:4326") %>%
leaflet(width = "100%") %>%
addProviderTiles(provider = "CartoDB.Positron") %>%
addPolygons(popup = ~ str_extract(NAME, "^([^,]*)"),
stroke = FALSE,
smoothFactor = 0,
fillOpacity = 0.7,
color = ~ pal(estimate),
label = aa_statepop$NAME,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto")) %>%
label = aa_statepop$NAME,
aa_statepop %>%
st_transform(crs = "+init=epsg:4326") %>%
leaflet(width = "100%") %>%
addProviderTiles(provider = "CartoDB.Positron") %>%
addPolygons(popup = ~ str_extract(NAME, "^([^,]*)"),
stroke = FALSE,
smoothFactor = 0,
fillOpacity = 0.4,
color = ~ pal(pct),
label = aa_statepop$NAME,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto")) %>%
addLegend("bottomright",
pal = pal,
values = ~ pct,
title = "Asian Alone",
opacity = 1,
labFormat = labelFormat(suffix = "%"))
aa_statepop %>% filter(NAME !%in% c("Hawaii", "Alaska")) %>%
aa_statepop %>% filter(!NAME %in% c("Hawaii", "Alaska")) %>%
st_transform(crs = "+init=epsg:4326") %>%
leaflet(width = "100%") %>%
addProviderTiles(provider = "CartoDB.Positron") %>%
addPolygons(popup = ~ str_extract(NAME, "^([^,]*)"),
stroke = FALSE,
smoothFactor = 0,
fillOpacity = 0.4,
color = ~ pal(estimate),
label = aa_statepop$NAME,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "15px",
direction = "auto")) %>%
addLegend("bottomright",
pal = pal,
values = ~ estimate,
title = "Asian Alone",
opacity = 1,
labFormat = labelFormat(suffix = "%"))
devtools::install_github("tidyverse/glue")
library(glue)
library(forcats)
library(DT)
library(readxl)
library(tidyverse)
head(mtcars) %>% glue_data("{rownames(.)} has {hp} hp")
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu.xlsx")
state_edu$pop_id<- as.factor(state_edu$pop_id)
state_edu_long<- state_edu %>% select(st_name, pop_id,total:pct_hshigher) %>%
gather( estimate_type, value, -st_name ,-pop_id)
head(state_edu)
state_edu %>% distinct(st_name)
head(state_edu) %>% glue_data("This data has information for {st_name}")
head(state_edu) %>% glue_data("{st_name(.)} has {hp} hp")
st_name
head(state_edu) %>% glue_data("{rownames(.)} has ")
head(state_edu) %>% glue_data("{st_name} has ")
state_edu %>% distinct(st_name) %>% glue_data("We have data for {st_name}.")
setwd("~/quick_stats")
library(DT)
library(readxl)
library(tidyverse)
library(highcharter)
topic_selected <- params$topic
st_dta <- read_excel("state_dta.xlsx",sheet = topic_selected)
View(state_edu)
knit_with_parameters('~/quick_stats/report_template.Rmd')
knitr::opts_chunk$set(echo = TRUE)
library(forcats)
=======
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge(width = 1))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge(width = 1))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge(width = 5))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge(width = 1))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2())
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1,padding = .4))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1,preserve = T))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 2))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), color= "red")
geom_text(aes(label= ("  ",round(Estimate/1000000,2)), position = position_dodge2(width = 1), color= "red")
geom_text(aes(label= ("  ",round(Estimate/1000000,2)), position = position_dodge2(width = 1),  vjust = 0.5, size = 2)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= ("  ",round(Estimate/1000000,2)), position = position_dodge2(width = 1),  vjust = 0.5, size = 2))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= ("  ",round(Estimate/1000000,2)), position = position_dodge2(width = 1),  vjust = 0.5, size = 2))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1),  vjust = 0.5, size = 2))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1),  vjust = 0.5, size = 2)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1),  vjust = 5,)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), hjust=3,)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), vjust=.5)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), vjust=1)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), vjust=-1)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), vjust=-.75)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), vjust=-.75)+
coord_flip()
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip()
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip()
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), hjust=-1)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), hjust=-.75)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= round(Estimate/1000000,2)), position = position_dodge2(width = 1), hjust=-.5)
ethnic <- readxl::read_excel("Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/asianpop.xlsx",sheet = "detailed origin")
ethnicsmall<- ethnic %>% filter(Estimate < 500000)
ethniclarge<- ethnic %>% filter(Estimate > 500000)
## Reordering ethniclarge$Group
ethniclarge$Group <- factor(ethniclarge$Group, levels=c("Chinese", "Asian Indian", "Filipino", "Vietnamese", "Korean", "Japanese"))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
scale_y_comma(limits=c(0,5),name = "Millions") +
coord_flip() +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.5)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.2)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.2, size=14)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.2, size=12)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.2, size=10)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
theme(axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.2, size=10)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
theme(axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.1, size=10)
ethniclarge %>% ggplot(aes(x = factor(Group), y = Estimate/1000000, group = Type, fill= Type)) +
geom_bar(stat="identity", position = "dodge") +
theme_ipsum_rc(grid=F) +ggtitle("Asian American Population Estimates",subtitle = "ACS 2011-2015 5 Year Tables") +
scale_fill_economist()+
coord_flip() +
scale_y_comma(limits=c(0,5),name = "Million") +
#theme(text = element_text(size=20))+
theme(axis.text.y=element_text(size=15, face="bold"),
plot.title = element_text(size=25),
plot.subtitle = element_text(size = 20))+
theme(axis.title.x=element_blank(),
axis.title.y=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())+
geom_text(aes(label= label), position = position_dodge2(width = 1), hjust=-.1, size=8)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 15, dpi = 300)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 15, dpi = 300, scale = .8)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 20, dpi = 300, scale = .8)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 15, dpi = 300, scale = .5)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 15, dpi = 300)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 19, dpi = 300)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 19, height = 12, dpi = 300)
ggsave('Dropbox/AAPIData HQ/Documentation and Protocols/ACS Best Practices/acs_pop_comparison2.png',width = 19, height = 10, dpi = 300)
library(shiny)
library(ggplot2)  # for the diamonds dataset
ui <- fluidPage(
title = "Examples of DataTables",
sidebarLayout(
sidebarPanel(
conditionalPanel(
'input.dataset === "diamonds"',
checkboxGroupInput("show_vars", "Columns in diamonds to show:",
names(diamonds), selected = names(diamonds))
),
conditionalPanel(
'input.dataset === "mtcars"',
helpText("Click the column header to sort a column.")
),
conditionalPanel(
'input.dataset === "iris"',
helpText("Display 5 records by default.")
)
),
mainPanel(
tabsetPanel(
id = 'dataset',
tabPanel("diamonds", DT::dataTableOutput("mytable1")),
tabPanel("mtcars", DT::dataTableOutput("mytable2")),
tabPanel("iris", DT::dataTableOutput("mytable3"))
)
)
)
)
server <- function(input, output) {
# choose columns to display
diamonds2 = diamonds[sample(nrow(diamonds), 1000), ]
output$mytable1 <- DT::renderDataTable({
DT::datatable(diamonds2[, input$show_vars, drop = FALSE])
})
# sorted columns are colored now because CSS are attached to them
output$mytable2 <- DT::renderDataTable({
DT::datatable(mtcars, options = list(orderClasses = TRUE))
})
# customize the length drop-down menu; display 5 rows per page by default
output$mytable3 <- DT::renderDataTable({
DT::datatable(iris, options = list(lengthMenu = c(5, 30, 50), pageLength = 5))
})
}
shinyApp(ui, server)
library(shiny)
library(ggplot2)  # for the diamonds dataset
>>>>>>> Stashed changes
library(DT)
library(readxl)
library(tidyverse)
library(highcharter)
library(glue)
<<<<<<< Updated upstream
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu.xlsx")
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu2.xlsx")
View(state_edu)
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu2.xlsx")
View(state_edu)
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu.xlsx")
View(state_edu)
state_edu %>% select(st_name, pop_id,total:pct_hshigher) %>%
gather( estimate_type, value, -st_name ,-pop_id)
View(state_edu)
View(state_edu)
state_edu_long
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu.xlsx")
state_edu$pop_id<- as.factor(state_edu$pop_id)
state_edu_long<- state_edu %>% select(st_name, pop_id,total:pct_hshigher) %>%
gather( estimate_type, estimate, -st_name ,-pop_id)
state_edu_long<- state_edu %>% select(st_name, pop_group,Total:pct_hshigher) %>%
gather( estimate_type, estimate, -st_name ,-pop_group)
state_edu_long
state_edu_long %>%
mutate(long_key=paste(pop_group, estimate_type, sep=" ")) %>%
select(-pop_id, -estimate_type)%>%
spread(long_key, value)
state_edu_long %>%
mutate(long_key=paste(pop_group, estimate_type, sep=" ")) %>%
select(-pop_group, -estimate_type)%>%
spread(long_key, value)
state_edu_long %>%
mutate(long_key=paste(pop_group, estimate_type, sep=" ")) %>%
select(-pop_group, -estimate_type)%>%
spread(long_key, estimate)
state_edu_long %>%
mutate(long_key=paste(pop_group, estimate_type, sep=" "))
state_edu_long %>%
mutate(long_key=paste(pop_group, estimate_type, sep=":")) %>%
select(-pop_group, -estimate_type)
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu.xlsx")
state_edu$pop_id<- as.factor(state_edu$pop_id)
head(state_edu)
state_edu_long
datatable(state_edu_long)
View(state_edu_long)
state_edu_long %>% spread(estimate_type, estimate)
state_edu_long<- state_edu %>% select(st_name, pop_id,Total:pct_hshigher) %>%
gather( estimate_type, estimate, -st_name ,-pop_id)
View(state_edu_long)
state_edu_alone <- state_edu_long  %>% filter(pop_id %in% majorgroups_alone ) %>%
state_edu_alone <- state_edu_long  %>% filter(pop_id %in% majorgroups_alone )
# 1 = Total Population, 12 = Asian Alone, 50 = NHPI Alone
majorgroups_alone<- c(1,12,50)
# 1 = Total Population, 12 = Asian Alone/Combo, 50 = NHPI Alone/Combo
majorgroups_alone_combo<- c(31,60,1)
state_edu_alone <- state_edu_long  %>% filter(pop_id %in% majorgroups_alone )
View(state_edu_alone)
state_edu_alone$pop_id <- fct_recode(state_edu_alone$pop_id,
"Total Population" = "1",
"Asian Alone" = "12",
"NHPI Alone" = "50")
datatable(state_edu_alone)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=":")) %>%
select(-pop_group, -estimate_type) %>%
spread(long_key, estimate)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=":")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate)
state_edu_alone
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=":")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate)%>%
datatable(datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = 1:4,1))
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=":")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = 1:4,1)
test <-state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate)
View(test)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = c(2,6,10) %>%
formatCurrency(columns = c(2:4,7:9:10:13),currency = "", interval = 3, mark = ",", digits=0)
state_edu_alone %>%
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = c(2,6,10)) %>%
formatCurrency(columns = c(2,3,4,7,8,9,11,12,13),currency = "", interval = 3, mark = ",", digits=0)
state_edu_alone
questionr:::irec()
## Recoding state_edu_alone$estimate_type
state_edu_alone$estimate_type <- fct_recode(state_edu_alone$estimate_type,
"Total HS or GED" = "total_hsged",
"Total BA or Higher" = "total_bahigher",
"Percent HS or Higher" = "pct_hshigher")
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = c(2,6,10)) %>%
formatCurrency(columns = c(2,3,4,7,8,9,11,12,13),currency = "", interval = 3, mark = ",", digits=0)
## Recoding state_edu_alone$estimate_type
state_edu_alone$estimate_type <- fct_recode(state_edu_alone$estimate_type,
"HS or GED" = "total_hsged",
"BA or Higher" = "total_bahigher",
"HS or Higher" = "pct_hshigher")
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu.xlsx")
state_edu$pop_id<- as.factor(state_edu$pop_id)
state_edu_long<- state_edu %>% select(st_name, pop_id,Total:pct_hshigher) %>%
gather( estimate_type, estimate, -st_name ,-pop_id)
datatable(state_edu_long)
# 1 = Total Population, 12 = Asian Alone, 50 = NHPI Alone
majorgroups_alone<- c(1,12,50)
# 1 = Total Population, 12 = Asian Alone/Combo, 50 = NHPI Alone/Combo
majorgroups_alone_combo<- c(31,60,1)
state_edu_alone <- state_edu_long  %>% filter(pop_id %in% majorgroups_alone )
state_edu_alone$pop_id <- fct_recode(state_edu_alone$pop_id,
"Total Population" = "1",
"Asian Alone" = "12",
"NHPI Alone" = "50")
## Recoding state_edu_alone$estimate_type
state_edu_alone$estimate_type <- fct_recode(state_edu_alone$estimate_type,
"HS or GED" = "total_hsged",
"BA or Higher" = "total_bahigher",
"HS or Higher" = "pct_hshigher")
datatable(state_edu_alone)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = c(2,6,10)) %>%
formatCurrency(columns = c(2,3,4,7,8,9,11,12,13),currency = "", interval = 3, mark = ",", digits=0)
state_edu<- readxl::read_xlsx("~/Documents/quickstatsdatabase/state_edu.xlsx")
state_edu$pop_id<- as.factor(state_edu$pop_id)
state_edu_long<- state_edu %>% select(st_name, pop_id,Total:pct_hshigher) %>%
gather( estimate_type, estimate, -st_name ,-pop_id)
state_edu_long
# 1 = Total Population, 12 = Asian Alone, 50 = NHPI Alone
majorgroups_alone<- c(1,12,50)
# 1 = Total Population, 12 = Asian Alone/Combo, 50 = NHPI Alone/Combo
majorgroups_alone_combo<- c(31,60,1)
state_edu_alone <- state_edu_long  %>% filter(pop_id %in% majorgroups_alone )
View(state_edu_alone)
## Recoding state_edu_alone$estimate_type
state_edu_alone$estimate_type <- fct_recode(state_edu_alone$estimate_type,
"HS or GED" = "total_hsged",
"BA or Higher" = "total_bahigher",
"HS or Higher" = "pct_hshigher")
state_edu_alone$pop_id <- fct_recode(state_edu_alone$pop_id,
"Total Population" = "1",
"Asian Alone" = "12",
"NHPI Alone" = "50")
View(state_edu_alone)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": "))
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = c(2,6,10)) %>%
formatCurrency(columns = c(2,3,4,7,8,9,11,12,13),currency = "", interval = 3, mark = ",", digits=0)
test2< state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatPercentage(columns = c(2,6,10)) %>%
formatCurrency(columns = c(2,3,4,7,8,9,11,12,13),currency = "", interval = 3, mark = ",", digits=0)
test2 <- state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate)
View(test2)
test2 <- state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatCurrency(columns = c(colnames()),currency = "", interval = 3, mark = ",", digits=0)
test2 <- state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatCurrency(columns = c(colnames(.)),currency = "", interval = 3, mark = ",", digits=0)
View(test2)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatCurrency(columns = c(colnames(.)),currency = "", interval = 3, mark = ",", digits=0)
test2 <- state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate)
View(test2)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatCurrency(columns = c(2,3,5,6,7,9,10,11,13),currency = "", interval = 3, mark = ",", digits=0) %>%
formatPercentage(columns = c(4,8,12),digits = 1)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>%
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate,fill = "missing") %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatCurrency(columns = c(2,3,5,6,7,9,10,11,13),currency = "", interval = 3, mark = ",", digits=0) %>%
formatPercentage(columns = c(4,8,12),digits = 1)
state_edu_alone %>%
mutate(long_key=paste(pop_id, estimate_type, sep=": ")) %>% #Combining Pop_ID and Estimate type
select(-pop_id, -estimate_type) %>%
spread(long_key, estimate,fill = "No Data") %>%
rename(State= st_name) %>%
datatable(extensions =
list("Buttons" = NULL, 'FixedColumns'= T, "Scroller"=T),
rownames= FALSE,
options = list(
dom = 'Brtip',
buttons = c('copy', 'csv', 'excel'),
scrollX = TRUE,
lengthMenu = c(25, 50, 100), pageLength = 50,
deferRender = TRUE,
scrollY = 400,
scroller = TRUE)) %>%
formatCurrency(columns = c(2,3,5,6,7,9,10,11,13),currency = "", interval = 3, mark = ",", digits=0) %>%
formatPercentage(columns = c(4,8,12),digits = 1)
=======
#topic_selected <- params$topic
#national_dta <- read_excel("national_dta.xlsx",sheet = topic_selected)
setwd("~/quick_stats")
national_dta <- read_excel("national_dta.xlsx",sheet = "CVAP")
knitr::knit_hooks$set(inline = function(x) { if(!is.numeric(x)){ x }else{ prettyNum(round(x,2), big.mark=",", digits=6) } })
shinyApp(ui, server)
ui <- fluidPage(
title = "Examples of DataTables",
sidebarLayout(
sidebarPanel(
selectInput("pop_group", label = "Population Group:",
choices = c("Major Racial Group", "Asian Detailed Origin", "Asian Detailed Combo","NHPI Detailed Combo", "NHPI Detailed Origin"))
)
)
)
library(reactR)
install.packages("reactR")
library(reactR)
library(htmltools)
browsable(attachDependencies(
tags$script(
"
ReactDOM.render(
React.createElement(
'h1',
null,
'Powered by React'
),
document.body
)
"
),
html_dependency_react()
))
>>>>>>> Stashed changes
